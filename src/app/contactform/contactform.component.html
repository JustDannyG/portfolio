<section class="contact-section" id="contact">
  <button class="contact-section__scroll-top" type="button" [attr.aria-label]="texts().form.scrollTopLabel"
    (click)="scrollToTop()">
    <img src="assets/img/contactform/Property 1=Default.svg" alt="Scroll to top" />
  </button>

  <div class="contact-section__inner">
    <h2 class="contact-section__title">{{ texts().title }}</h2>
    <div class="contact-section__content">

      <div class="contact-section__intro">
        <p>
          {{ texts().intro }}
        </p>
      </div>

      <div class="contact-section__details">
        <div class="detail-item detail-item--email" (mouseenter)="setEmailActive(true)"
          (mouseleave)="setEmailActive(false)"
          [class.detail-item--interactive-active]="isEmailActive && !isEmailSelected"
          [class.detail-item--email-active]="isEmailSelected">
          <img [src]="isEmailSelected
              ? 'assets/img/contactform/ icon _email_active.svg'
              : isEmailActive
                ? 'assets/img/contactform/ icon _email_hover.svg'
                : 'assets/img/contactform/ icon _email_.svg'" alt="" aria-hidden="true"
            class="detail-icon detail-icon--email" />
          <div class="detail-item__text">
            <p class="detail-label" [class.detail-label--active]="isEmailActive || isEmailSelected">
              {{ texts().details.emailLabel }}
            </p>
            <a href="mailto:danny.grmn&#64;icloud.com" (focus)="setEmailActive(true)" (blur)="setEmailActive(false)"
              (click)="setEmailSelected()"
              [class.detail-link--active]="isEmailActive || isEmailSelected">danny.grmn&#64;icloud.com</a>
          </div>
        </div>
        <div class="detail-item detail-item--phone" (mouseenter)="isPhoneHover = true"
          (mouseleave)="isPhoneHover = false" [class.detail-item--phone-hover]="isPhoneHover">
          <img [src]="isPhoneHover
              ? 'assets/img/contactform/ icon _phone_hover.svg'
              : 'assets/img/contactform/ icon _phone_.svg'" alt="" aria-hidden="true"
            class="detail-icon detail-icon--phone" />
          <div class="detail-item__text">
            <p class="detail-label">{{ texts().details.phoneLabel }}</p>
            <a href="tel:+491738482211">+49 173 8482211</a>
          </div>
        </div>
      </div>
    </div>

    <form class="contact-form" #contactForm="ngForm" (ngSubmit)="onSubmit(contactForm)">
      <div class="name-email-form">
        <div class="field">
          <label class="d-none" for="first-name">{{ texts().form.nameLabel }}</label>
          <input #firstName="ngModel" [(ngModel)]="contactData.name" id="first-name" name="firstName" type="text"
            ngModel required minlength="2" pattern="^(?!\s+$).+"
            [class.field--invalid]="firstName.invalid && (firstName.touched || contactForm.submitted) && !firstName.disabled" />
          @if (firstName.invalid && (firstName.touched || contactForm.submitted) && !firstName.disabled) {
          <span class="errorMsg">{{ texts().form.nameError }}</span>
          }
        </div>

        <div class="field">
          <label class="d-none" for="last-name">{{ texts().form.emailLabel }}</label>
          <input #email="ngModel" [(ngModel)]="contactData.email" id="last-name" name="lastName" type="text" ngModel
            required pattern="^(?!.*\.\.)[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$"
            [class.field--invalid]="email.invalid && (email.touched || contactForm.submitted) && !email.disabled" />
          @if (email.invalid && (email.touched || contactForm.submitted) && !email.disabled) {
          <span class="errorMsg">{{ texts().form.emailError }}</span>
          }
        </div>
      </div>

      <div class="field field--textarea">
        <label class="d-none" for="subject">{{ texts().form.messageLabel }}</label>
        <textarea #message="ngModel" [(ngModel)]="contactData.message" id="subject" name="subject" rows="6"
          [placeholder]="texts().form.messagePlaceholder" ngModel required minlength="8" pattern="^(?!\s+$).+"
          [class.field--invalid]="!message.valid && (message.touched || contactForm.submitted) && !message.disabled"></textarea>
        @if (!message.valid && (message.touched || contactForm.submitted) && !message.disabled) {
        <span class="errorMsg">{{ texts().form.messageError }}</span>
        }
      </div>

      <div class="consent-row">
        <label class="consent-checkbox" [class.consent-checkbox--checked]="privacyAccepted">
          <input type="checkbox" [(ngModel)]="privacyAccepted" name="privacyConsent" />
          <img [src]="!privacyAccepted && contactForm.submitted
              ? 'assets/img/contactform/Property 1=error.svg'
              : privacyAccepted
                ? 'assets/img/contactform/Check box (1).svg'
                : isHoveringConsent
                  ? 'assets/img/contactform/Property 1=hover.svg'
                  : 'assets/img/contactform/Check box.svg'" alt="Privacy consent" (mouseenter)="onConsentHover(true)"
            (mouseleave)="onConsentHover(false)" />
        </label>
        <p>
          {{ texts().form.consent.textBeforeLink }}<a [routerLink]="['/privacy-policy']">{{
            texts().form.consent.linkLabel }}</a>{{ texts().form.consent.textAfterLink }}
        </p>
      </div>
      <div class="send-btn-container">
        <button class="send-btn" type="submit" [class.send-btn--active]="contactForm.valid && privacyAccepted"
          (click)="handleSendButtonClick(contactForm)">
          {{ texts().form.submitLabel }}
        </button>
      </div>
      <div class="arrow-top-container">
        <button class="arrow-top" type="button" [attr.aria-label]="texts().form.scrollTopLabel" (click)="scrollToTop()">
          <img src="assets/img/langingpage-img/arrow-down.svg" alt="" aria-hidden="true" />
        </button>
      </div>
    </form>
  </div>
</section>
@if (isSuccessOverlayVisible) {
<app-succsessfully-sent [headline]="texts().form.success.title" [subline]="texts().form.success.message"
  [closing]="isSuccessOverlayClosing" (closed)="closeSuccessOverlay()"></app-succsessfully-sent>
}